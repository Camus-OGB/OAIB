# ═══════════════════════════════════════════════════════════
# Configuration OAIB - Backend & Frontend
# ═══════════════════════════════════════════════════════════
# Ce fichier est partagé entre backend/ et frontend/
# Copiez ce fichier en .env et remplissez avec vos valeurs

# ─── Django Backend ────────────────────────────────────────
DEBUG=True
SECRET_KEY=change-this-secret-key-in-production-use-strong-random-key
ALLOWED_HOSTS=localhost,127.0.0.1

# ─── Database PostgreSQL (Supabase Session Pooler) ────────
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE
DATABASE_URL=postgresql://postgres:password@localhost:5432/oaib

# Alternative: Variables séparées (si vous n'utilisez pas DATABASE_URL)
# DATABASE_NAME=oaib
# DATABASE_USER=oaib_user
# DATABASE_PASSWORD=changeme
# DATABASE_HOST=localhost
# DATABASE_PORT=5432

# ─── Supabase Storage ──────────────────────────────────────
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_KEY=your-anon-key-here
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# ─── Email (SMTP) ──────────────────────────────────────────
# Pour le développement: console.EmailBackend (affiche dans le terminal)
EMAIL_BACKEND=django.core.mail.backends.console.EmailBackend

# Pour la production: SMTP (Gmail, SendGrid, Mailtrap, etc.)
# EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=your-app-password
DEFAULT_FROM_EMAIL=noreply@oaib.bj

# ─── CORS (Frontend autorisé) ──────────────────────────────
# Développement local
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173

# Production (remplacer par vos vrais domaines)
# CORS_ALLOWED_ORIGINS=https://oaib.bj,https://www.oaib.bj,https://app.oaib.bj

# ─── JWT Tokens ────────────────────────────────────────────
JWT_ACCESS_TOKEN_LIFETIME=60
JWT_REFRESH_TOKEN_LIFETIME=1440

# ─── Site Info ─────────────────────────────────────────────
SITE_NAME=Olympiades IA Benin
SITE_URL=http://localhost:3000
FRONTEND_URL=http://localhost:3000

# ─── Frontend (React + Vite) ───────────────────────────────
# URL du backend API (utilisée par le frontend)
VITE_API_URL=http://localhost:8000

# URL du site frontend (utilisée par le frontend)
VITE_SITE_URL=http://localhost:3000

# ─── OTP (Vérification par email) ──────────────────────────
OTP_EXPIRY_MINUTES=10
OTP_LENGTH=6

# ─── File Uploads ──────────────────────────────────────────
MAX_FILE_SIZE_MB=10

# ─── Superuser (création automatique optionnelle) ──────────
DJANGO_SUPERUSER_USERNAME=admin
DJANGO_SUPERUSER_EMAIL=admin@oaib.bj
DJANGO_SUPERUSER_PASSWORD=admin123

# ─── Redis (optionnel pour cache/Celery) ───────────────────
# REDIS_URL=redis://localhost:6379/0

# ═══════════════════════════════════════════════════════════
# NOTES DE CONFIGURATION
# ═══════════════════════════════════════════════════════════
#
# 1. Pour le développement local:
#    - Utiliser DEBUG=True
#    - EMAIL_BACKEND=console.EmailBackend (emails dans le terminal)
#    - DATABASE_URL pointe vers votre PostgreSQL local ou Supabase
#
# 2. Pour la production:
#    - DEBUG=False
#    - SECRET_KEY = générer avec: python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
#    - ALLOWED_HOSTS = vos domaines réels (api.oaib.bj)
#    - EMAIL_BACKEND = smtp.EmailBackend avec vraies credentials
#    - CORS_ALLOWED_ORIGINS = domaines frontend autorisés
#    - VITE_API_URL = URL production du backend (https://api.oaib.bj)
#
# 3. Supabase:
#    - SUPABASE_URL: Settings → API → Project URL
#    - SUPABASE_KEY: Settings → API → anon/public key
#    - SUPABASE_SERVICE_ROLE_KEY: Settings → API → service_role key (secret!)
#    - DATABASE_URL: Settings → Database → Connection pooling → Session mode
#
# 4. Gmail SMTP:
#    - Activer l'authentification à 2 facteurs
#    - Générer un mot de passe d'application
#    - Utiliser ce mot de passe dans EMAIL_HOST_PASSWORD
#
# ═══════════════════════════════════════════════════════════
